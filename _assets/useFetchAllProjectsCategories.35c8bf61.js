import{_ as g}from"./image.vue.316cf01f.js";import{d as _,h as l,o as f,j as h,l as e,k as v,b as i,t as c,z as b,q as d,s as p}from"./entry.e63a48cf.js";import{g as j,a as y,f as w}from"./content-helpers.dcdddb83.js";import{f as C}from"./helpers.44798cb7.js";const B={class:"group border-b bg-white transition cursor-pointer relative"},x={class:"text-center group-hover:bg-gray-100 transition p-8"},$={class:"font-title font-bold truncate uppercase"},k=e("div",{class:"w-10 group-hover:w-20 transition-all h-[1px] bg-armenian-orange mx-auto my-4"},null,-1),A={class:"truncate"},F={class:"text-sm"},N={href:"/",class:"text-link-orange"},P=["href"],E=_({__name:"projects-list-item",props:{item:{}},setup(o){const s=o,{$imageUrl:r}=d(),a=l(()=>j(s.item.content,180));return(t,m)=>{const u=g;return f(),h("div",B,[e("div",null,[v(u,{src:i(r)(t.item.thumbnail,{width:"400"}),"image-class":"max-h-48 object-cover",icon:"fa-solid fa-file-lines"},null,8,["src"])]),e("div",x,[e("div",$,c(i(y)(t.item.title)),1),k,e("div",A,c(i(a).substring(0,100)),1),e("div",F,[b(c(i(w)(t.item.date_published))+" - ",1),e("a",N,c(t.item.category.name),1)])]),e("a",{href:`/les-projets/${t.item.slug}`,class:"absolute caret-transparent bottom-0 left-0 right-0 top-0 h-full w-full"},null,8,P)])}}}),Q=async(o,s,r)=>{const{$directus:a}=d(),{data:t}=await p("projects",()=>a.items("projects").readByQuery({filter:s.value!=null?{category:{name:{_eq:s.value}}}:void 0,fields:[...C(3),"category.*"],sort:["-date_published"],page:o.value,limit:r,meta:"filter_count"})),m=l(()=>{var n;return Math.ceil(((n=t.value)==null?void 0:n.meta.filter_count)/r)}),u=l(()=>{var n;return(n=t.value)==null?void 0:n.data});return{totalPages:m,projects:u}},S=async()=>{const{$directus:o}=d(),{data:s}=await p("projectsCategories",()=>o.items("projects_categories").readByQuery({fields:["*"]}));return{projectCategories:l(()=>{var a;return(a=s.value)==null?void 0:a.data})}};export{E as _,S as a,Q as u};
